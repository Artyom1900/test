<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>

        <h:form id="form"> 
            <p:panelGrid id="grid" style="margin: auto;">       
                <p:growl id="messages" showDetail="true" />
                <p:row>
                    <p:column colspan="2">
                        <p:tabMenu>
                            <p:menuitem value="Product" icon="ui-icon-star">

                            </p:menuitem>
                            <p:menuitem value="Rider" icon="ui-icon-search">

                            </p:menuitem>
                            <p:menuitem value="Meterial Test" icon="ui-icon-document">

                            </p:menuitem>
                            <p:menuitem value="Meterial Out" icon="ui-icon-wrench">

                            </p:menuitem>
                            <p:menuitem value="Settings" icon="ui-icon-person">

                            </p:menuitem>
                        </p:tabMenu>  
                    </p:column>
                </p:row>
                <p:row>
                    <p:column colspan="1"> 
                        <p:scrollPanel mode="native" style="width: 310px; height: 250px">

                            <p:growl id="log" showDetail="true" />

                            <p:tree id="products" value="#{contextViewTree.root}" var="product" selectionMode="single" 
                                    selection="#{contextViewTree.selectedNode}" dynamic="true" 
                                    >           

                                <p:ajax event="select" listener="#{contextViewTree.printNode}" update=":form:oneListView"/>

                                <p:treeNode expandedIcon="ui-icon-folder-open" collapsedIcon="ui-icon-folder-collapsed" >
                                    <h:outputText value="#{product.name}"/>
                                </p:treeNode>

                            </p:tree>

                            <p:contextMenu for="products">
                                <p:menuitem value="View" update="log" actionListener="#{contextViewTree.displaySelectedSingle()}" icon="ui-icon-search" />
                                <p:menuitem value="Print" update="products" actionListener="#{contextViewTree.printNode()}" icon="ui-icon-close"/>
                                <p:menuitem value="Delete" update="products" actionListener="#{contextViewTree.deleteNode()}" icon="ui-icon-close"/>
                                <p:menuitem value="Insert" update="products" actionListener="#{contextViewTree.insertNode()}" icon="ui-icon-close"/>
                                <p:menuitem value="Add folder" update="products" actionListener="#{contextViewTree.addFolder()}" icon="ui-icon-close"/>
                                <p:menuitem value="Add new product" update="products" oncomplete="PF('dlg').show()" icon="ui-icon-close">

                                </p:menuitem>

                            </p:contextMenu>
                            <p:dialog widgetVar="dlg" modal="true" resizable="false" header="Add new product" showEffect="fade">

                                <h:outputText id="summ5" value="" style="color: red"/>
                                <p:panelGrid id="display" columns="2" columnClasses="label,value" style="margin: auto;">

                                    <h:outputText value="Name:" />
                                    <h:inputText id="name" value="#{contextViewTree.name}" />

                                    <p:commandButton value="Create" id="yes" style="width: 100px" action="#{contextViewTree.createNode()}" onclick="PF('dlg').hide();"
                                                     update="products, name"></p:commandButton>
                                    <p:commandButton value="Cancel" type="button" styleClass="ui-confirmdialog-no" onclick="PF('dlg').hide();" style="width: 100px"/>
                                </p:panelGrid>
                            </p:dialog>
                        </p:scrollPanel>
                    </p:column>



                    <p:column rowspan="1" colspan="1"> 
                        <h:panelGrid columns="1" cellpadding="2" 
                                     columnClasses="label, value">
                            <p:dataTable var="matTest" value="#{dtBasicView.matTest}" scrollable="true" 
                                         scrollWidth="770" scrollHeight="180" style="width: 770px;">
                                <p:column headerText="Tester">
                                    <h:outputText value="#{matTest.tester}" />
                                </p:column>

                                <p:column headerText="Wind">
                                    <h:outputText value="#{matTest.wind}" />
                                </p:column>

                                <p:column headerText="Comment">
                                    <h:outputText value="#{matTest.comment}" />
                                </p:column>

                                <p:column headerText="Changes">
                                    <h:outputText value="#{matTest.changes}" />
                                </p:column>
                            </p:dataTable>
                        </h:panelGrid>
                        <h:panelGrid columns="1" cellpadding="2" 
                                     columnClasses="label, value">
                            <p:commandButton value="Create new" style="width: 770px"/>
                        </h:panelGrid>
                    </p:column>
                </p:row>  

                <p:row>
                    <p:column  rowspan="0" colspan="0"> 
                        <h:panelGrid id="myc" columns="1" cellpadding="2" 
                                     columnClasses="label, value">

                            <p:selectOneListbox id="oneListView" value="#{selectOneView.selected}"
                                                converter="prConverter" 
                                                style="width: 300px">

                                <f:selectItems id="serialNumber" value="#{selectOneView.listProductInstance}" 
                                               var="productInstance" itemLabel="#{productInstance.serialNumber}"
                                               itemValue="#{productInstance}" 
                                               />
                                <p:ajax 
                                    listener="#{selectOneView.test()}" />

                            </p:selectOneListbox>

                            <p:contextMenu for="oneListView">
                                <p:menuitem value="Create new" actionListener="#{selectOneView.test()}"  icon="ui-icon-search" />
                                <p:menuitem value="Edit" actionListener="#{selectOneView.test()}"  oncomplete="PF('editProductInstance').show()" icon="ui-icon-search" />
                                <p:menuitem value="Delete" update="oneListView" actionListener="#{selectOneView.test()}" icon="ui-icon-close"/>
                            </p:contextMenu>
                            <p:dialog widgetVar="editProductInstance" modal="true" resizable="false" header="Edit instance" showEffect="fade">

                                <h:outputText  value=" " style="color: red"/>
                                <p:panelGrid id="editProductInstance" columns="2" columnClasses="label,value" style="margin: auto;">

                                    <h:outputText value="Id:" />
                                    <h:outputText value="#{selectOneView.selected.id}" />
                                    
                                    <h:outputText value="Serial:" />
                                    <h:inputText id="serial"  />
                                    
                                    <h:outputText value="Size:" />
                                    <h:inputText id="size"  />

                                    <p:commandButton value="OK" id="yes_" style="width: 100px"  
                                                     update="products, name"></p:commandButton>
                                    <p:commandButton value="Cancel" type="button" styleClass="ui-confirmdialog-no"  style="width: 100px"
                                                     onclick="PF('editProductInstance').hide()"/>
                                </p:panelGrid>
                            </p:dialog>
                            
                        </h:panelGrid>
                        <h:panelGrid columns="1" cellpadding="2" 
                                     columnClasses="label, value">
                            <p:commandButton value="Create new" update="oneListView" style="width: 307px"/>
                        </h:panelGrid>
                    </p:column>

                    <p:column>
                        <h:panelGrid columns="1" cellpadding="2" 
                                     columnClasses="label, value">
                            <p:dataTable var="matOut" value="#{dtBasicView.matOut}" scrollable="true" 
                                         scrollWidth="770" scrollHeight="200" style="width: 770px;">
                                <p:column headerText="Tester">
                                    <h:outputText value="#{matOut.tester}" />
                                </p:column>

                                <p:column headerText="Date">
                                    <h:outputText value="#{matOut.strDate}" />
                                </p:column>

                                <p:column headerText="Return date">
                                    <h:outputText value="#{matOut.strReturnDate}" />
                                </p:column>

                            </p:dataTable>
                        </h:panelGrid>
                        <h:panelGrid columns="1" cellpadding="2" 
                                     columnClasses="label, value">
                            <p:commandButton value="Create new" style="width: 770px"/>
                        </h:panelGrid>
                    </p:column>

                </p:row>
            </p:panelGrid>

        </h:form>
    </h:body>
</html>

